name: "02 - PR CI (lint/tests)"

on:
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  contents: read

concurrency:
  group: pr-ci-${{ github.event.pull_request.number }}
  cancel-in-progress: true

jobs:
  ci:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout PR head
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Show workspace info (PR)
        run: |
          echo "github.workspace = ${{ github.workspace }}"
          echo "pwd = $(pwd)"
          echo "ls -la workspace:"
          ls -la "${{ github.workspace }}"
          echo
          echo "git status:"
          git status
          echo
          echo "git rev-parse HEAD:"
          git rev-parse HEAD

      # - uses: actions/setup-python@v5
      #   with:
      #     python-version: "3.11"
      #
      # - name: Install deps
      #   run: |
      #     python -m pip install -U pip
      #     pip install -r requirements.txt
      #
      # - name: Lint
      #   run: ruff check .
      #
      # - name: Tests
      #   run: pytest -q
